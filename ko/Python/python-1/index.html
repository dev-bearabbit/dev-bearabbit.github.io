

<!DOCTYPE html>
<html lang="ko" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="alternate" hreflang="ko" href="https://dev-bearabbit.github.io/" />
  <link rel="alternate" hreflang="en" href="https://dev-bearabbit.github.io/en/" />  
  <link rel="apple-touch-icon" sizes="76x76" href="/img/apple-touch-icon.png">
  <link rel="icon" href="/img/favicon.ico">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#000">
  <meta name="author" content="Jess">
  <meta name="keywords" content="">
  
    <meta name="description" content="글을 시작하기에 앞서 해당 글은 Mariano Anaya의 저서인 파이썬 클린 코드를 바탕으로 요약 및 정리한 글임을 알려드립니다.">
<meta property="og:type" content="article">
<meta property="og:title" content="파이썬스러운 코드">
<meta property="og:url" content="https://dev-bearabbit.github.io/ko/Python/python-1/index.html">
<meta property="og:site_name" content="DEV AnythinG">
<meta property="og:description" content="글을 시작하기에 앞서 해당 글은 Mariano Anaya의 저서인 파이썬 클린 코드를 바탕으로 요약 및 정리한 글임을 알려드립니다.">
<meta property="og:locale" content="ko_KR">
<meta property="article:published_time" content="2021-12-09T17:06:21.000Z">
<meta property="article:modified_time" content="2024-12-29T18:37:10.603Z">
<meta property="article:author" content="Jess">
<meta property="article:tag" content="python">
<meta property="article:tag" content="review">
<meta property="article:tag" content="Cleancode">
<meta property="article:tag" content="클린코드">
<meta property="article:tag" content="책리뷰">
<meta property="article:tag" content="code">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>파이썬스러운 코드 - DEV AnythinG</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"dev-bearabbit.github.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":{"measurement_id":"G-QW3E4LZZNF"},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  
    <!-- Google tag (gtag.js) -->
    <script async>
      if (!Fluid.ctx.dnt) {
        Fluid.utils.createScript("https://www.googletagmanager.com/gtag/js?id=G-QW3E4LZZNF", function() {
          window.dataLayer = window.dataLayer || [];
          function gtag() {
            dataLayer.push(arguments);
          }
          gtag('js', new Date());
          gtag('config', 'G-QW3E4LZZNF');
        });
      }
    </script>
  

  

  

  



  
<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>DEV AnythinG</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>Home</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>Categories</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>About</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="javascript:;" id="languageDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <i class="iconfont icon-globe"></i> <span id="current-lang"></span>
          </a>
          <div class="dropdown-menu" aria-labelledby="languageDropdown">
            <a class="dropdown-item" href="/">한국어</a>
            <a class="dropdown-item" href="/en/">English</a>
          </div>
        </li>
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    // 현재 언어를 URL 기반으로 감지
    const path = window.location.pathname;
    const currentLang = path.startsWith('/en/') ? 'English' : '한국어';

    // 선택된 언어를 버튼에 표시
    const currentLangElement = document.getElementById('current-lang');
    currentLangElement.textContent = currentLang;
  });
</script>

  

<div id="banner" class="banner" parallax=true
  style="background: url('/img/background.gif') no-repeat center center; background-size: cover;">
  <canvas id="canvas" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></canvas>
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="파이썬스러운 코드"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2021-12-10 02:06" pubdate>
          2021년 12월 10일 오전
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          923 words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          8 mins
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');

    // 캔버스 크기를 배너 크기와 동기화
    const banner = document.getElementById('banner');
    canvas.width = banner.offsetWidth;
    canvas.height = banner.offsetHeight;

    const cols = Math.floor(canvas.width / 20) + 1;
    const ypos = Array(cols).fill(0);

    function matrix() {
      ctx.fillStyle = '#0001'; // 배경 페이드 효과
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      ctx.fillStyle = '#009600'; // 텍스트 색상
      ctx.font = '14pt monospace';

      ypos.forEach((y, index) => {
        const text = String.fromCharCode(33 + Math.random() * 94); // 랜덤 ASCII 문자
        const x = index * 20;
        ctx.fillText(text, x, y);

        if (y > canvas.height + Math.random() * 10000) ypos[index] = 0;
        else ypos[index] = y + 20;
      });
    }

    setInterval(matrix, 60);

    // 창 크기 조정 시 캔버스 크기 업데이트
    window.addEventListener('resize', () => {
      canvas.width = banner.offsetWidth;
      canvas.height = banner.offsetHeight;
    });
  });
</script>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">파이썬스러운 코드</h1>
            
            
              <div class="markdown-body">
                
                <p>글을 시작하기에 앞서 해당 글은 Mariano Anaya의 저서인 파이썬 클린 코드를 바탕으로 요약 및 정리한 글임을 알려드립니다. <span id="more"></span></p>
<hr />
<h2 id="파이썬스럽다pythonic의-의미">파이썬스럽다(pythonic)의 의미</h2>
<p>모든 프로그래밍 언어는 각자의 고유한 관용구(idiom)를 가지고 있다. 여기서 관용구란 특정 작업을 수행하기 위한 특별한 방법이며, 패턴이라고도 불린다. 이런 관용구를 따른 코드를 관용적이라고 부르며, 파이썬에서는 파이썬스럽다고 한다. 이런 관용구를 따른 코드는 더 나은 성능을 낸다.</p>
<h2 id="인덱스와-슬라이스">인덱스와 슬라이스</h2>
<p>파이썬은 인덱스에 음수를 사용하여 끝에서부터 접근이 가능하다. 또한 슬라이스를 사용하여 특정 구간의 인덱스 요소롤 반환할 수 있다. 마지막 예제를처럼 슬라이스에서 세번째 값을 추가로 입력하여 간격을 설정할 수 있다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">&gt; num = (<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>)<br>&gt; num[-<span class="hljs-number">1</span>]<br><span class="hljs-number">7</span><br>&gt; num[<span class="hljs-number">1</span>:<span class="hljs-number">3</span>]<br>(<span class="hljs-number">3</span>,<span class="hljs-number">4</span>)<br>&gt;num[<span class="hljs-number">0</span>:<span class="hljs-number">4</span>:<span class="hljs-number">2</span>]<br>(<span class="hljs-number">2</span>,<span class="hljs-number">4</span>)<br></code></pre></td></tr></table></figure>
<h2 id="자체-시퀀스-생성">자체 시퀀스 생성</h2>
<p>슬라이스를 가져오는 또 다른 방법이 있다. 아래의 예시를 보자.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">&gt;interval = <span class="hljs-built_in">slice</span>(<span class="hljs-number">0</span>,<span class="hljs-number">4</span>,<span class="hljs-number">2</span>)<br>&gt;num[interval]<br>(<span class="hljs-number">2</span>,<span class="hljs-number">4</span>)<br></code></pre></td></tr></table></figure>
<p>결과는 위에서 직접 슬라이스를 한 결과와 같다. 위 방법은 클래스 내부에 내장되어 있는 <code>__getitem__</code>이라는 메서드를 이용한 것이다. 파이썬의 클래스는 기본적으로 내장된 몇 가지의 매서드가 존재한다. 이런 기능들을 <strong>매직 메서드</strong>라고 한다.</p>
<p><strong>매직 메서드란</strong><br />
매직 메서드란 사용자가 클래스안에 정의할 수 있는 스페셜 메서드로서 클래스를 int, str, list등의 파이썬의 빌트인 타입(built-in type)과 같은 작동을 하게 해준다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">items</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, *values</span>):<br>        <span class="hljs-variable language_">self</span>._values = <span class="hljs-built_in">list</span>(values)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__len__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(<span class="hljs-variable language_">self</span>._values)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__getitem__</span>(<span class="hljs-params">self, item</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>._values.__getitem__(item)<br></code></pre></td></tr></table></figure>
<p>위의 예시에서는 클래스 <code>items</code>에 3개의 매직 메서드를 정의했다. 하나씩 간단하게 기능을 살펴보자.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">&gt; exam = items(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>)<br>&gt; exam._values<br>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]<br>&gt;<span class="hljs-built_in">len</span>(exam)<br><span class="hljs-number">6</span><br>&gt;exam[interval]<br>[<span class="hljs-number">1</span>, <span class="hljs-number">3</span>]<br></code></pre></td></tr></table></figure>
<ul>
<li><code>__init__</code>: 클래스에 파라미터로 들어오는 값들을 객체로 저장한다. 위의 예시에서 클래스의 인스턴스인 <code>exam</code>은 <code>exam._values</code>에 리스트화된 <code>num</code>이 저장된다.</li>
<li><code>__len__</code>: <code>__init__</code>에 정의된 데이터의 개수를 반환한다. 위의 예시에서는 <code>exam._values</code>의 개수를 반환한다.</li>
<li><code>__getitem__</code>: key에 해당하는 대괄호 안의 값을 파라미터로 전달한다. 위의 예시에서는 <code>exam[interval]</code>을 입력하면 <code>interval</code>이 <code>__getitem__</code>의 파라미터로 전달되어 해당 함수의 반환값을 제공한다.</li>
</ul>
<p>이외에도 다양한 매직 메서드들이 많이 존재한다. 그렇다면 이런 기능을 왜 사용하는 것일까? 바로 데이터 타입을 맞춰주기 위함이다. 위와 같이 내장 함수나 사칙연산 함수 등을 데이터 타입에 맞게 함수로 지정해두면 편리하게 사용할 수 있다.</p>
<h2 id="컨텍스트-관리자">컨텍스트 관리자</h2>
<p>일반적으로 파일을 열면 파일 디스크럽터의 누수를 막기 위해 사용이 끝난 후 파일을 닫아야 한다. (파일 디스크럽터란 간단히 설명하면 데이터의 출입구이다.) 하지만 파일을 닫기 위해서는 할당된 모든 리소스를 해제하여야 하는데 코드가 복잡해지는 경우 모든 경로를 찾아서 해제하기는 어렵다. 이때 컨텍스트 관리자를 사용하면 이런 부분들을 자동으로 관리해준다. 아래 예시를 확인해보자.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filename) <span class="hljs-keyword">as</span> fd:<br>    process_file(fd)<br></code></pre></td></tr></table></figure>
<p>위 코드는 <code>with</code>로 컨텍스트 관리자로 진입한 후 <code>open()</code>으로 관리자 내부에서 파일을 오픈한 다음 <code>process_file()</code>함수에 들어있는 과정을 모두 실행한다. 여기서 예외가 발생해도 해당 함수에 들어있는 코드가 모두 진행되면 자동으로 해당 파일을 닫는다.</p>
<p>컨텍스트 관리자는 <code>__enter__</code>와 <code>__exit__</code>라는 두 개의 매직 메서드를 가지고 있다. 처음 <code>with</code>는 <code>__enter__</code>을 호출하여 해당 메서드에서 반환하는 객체를 <code>as</code> 다음에 오는 변수에 할당한다. 그후 코드가 끝나면 <code>__exit__</code>를 호출하여 해당 컨텍스트 관리자를 종료한다.</p>
<p>앞서 매직 메서드를 구현했던 예제와 같이 컨텍스트 관리자 또한 직접 구현할 수 있다. 바로 <code>contextlib</code>모듈을 사용하는 것이다. 아래의 예제를 확인해보자.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> contextlib<br><br><span class="hljs-meta">@contextlib.contextmanager</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">db_handler</span>():<br>    stop_database()<br>    <span class="hljs-keyword">yield</span><br>    start_database()<br><br><span class="hljs-keyword">with</span> db_handler():<br>    db_backup<br></code></pre></td></tr></table></figure>
<p>위와 같이 컨텍스트 관리자로 설정할 함수 위에 <code>@contextlib.contextmanager</code>를 추가하면 된다. 컨텍스트 관리자로 사용될 함수는 <strong>제너레이터</strong>라는 함수의 형태여야 한다.</p>
<p><strong>제너레이터란</strong><br />
제너레이터는 이터레이터를 생성해주는 함수이다. 이터레이터는 클래스에 <strong>iter</strong>, <strong>next</strong> 또는 <strong>getitem</strong> 메서드를 구현해야 하지만 제너레이터는 함수 안에서 yield라는 키워드만 사용하면 된다. 그래서 제너레이터는 이터레이터보다 훨씬 간단하게 작성할 수 있다.</p>
<p><code>db_handler()</code>에서 <code>yield</code>는 <code>__enter__</code>와 <code>__exit__</code>를 나눠주는 역할을 한다.</p>
<h2 id="프로퍼티-속성과-객체-메서드의-다른-타입들">프로퍼티, 속성과 객체 메서드의 다른 타입들</h2>
<p>다른 언어들과 다르게 파이썬 객체의 모든 프로퍼티와 함수는 public이다. 즉 호출자가 객체의 속성을 호출하지 못하도록 할 방법이 없다는 것이다.</p>
<p>엄격한 강제사항은 없지만 몇 가지 규칙이 있다. 밑줄로 시작하는 속성은 해당 객체에 대해 private을 의미하여, 외부에서 호출되지 않기를 기대하는 것이다.</p>
<h3 id="파이썬에서의-밑줄">파이썬에서의 밑줄</h3>
<p>파이썬에서 밑줄을 사용하는 몇 가지 규칙이 있다. 아래의 예시를 먼저 살펴보자.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Connector</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, source</span>):<br>        <span class="hljs-variable language_">self</span>.source = source<br>        <span class="hljs-variable language_">self</span>._timeout = <span class="hljs-number">60</span><br><br>&gt; con = Connector(<span class="hljs-string">&#x27;mysql://localhost&#x27;</span>)<br>&gt; con.source<br><span class="hljs-string">&#x27;mysql://localhost&#x27;</span><br>&gt;con._timeout<br><span class="hljs-number">60</span><br>&gt;con.__dict__<br>&#123;<span class="hljs-string">&#x27;source&#x27;</span>: <span class="hljs-string">&#x27;mysql://localhost&#x27;</span>, <span class="hljs-string">&#x27;_timeout&#x27;</span>: <span class="hljs-number">60</span>&#125;<br></code></pre></td></tr></table></figure>
<p>위 속성에서 볼 수 있듯이 <code>source</code>는 public이고 <code>_timeout</code>은 private이다. 이 코드를 해석해보면 <code>_timeout</code>은 해당 클라스 자체에서만 사용되고 바깥에서는 호출되지 않아야 한다. 이렇게 내부에서 사용할 것들을 밑줄로 정리해두면 훨씬 안전하게 리팩토링 할 수 있다.</p>
<p>어떤 이들은 밑줄 2개를 이용하면 private 객체를 만들 수 있다고 한다. 하지만 그것은 사실이 아니다. 아래의 예시를 보자.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Connector</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, source</span>):<br>        <span class="hljs-variable language_">self</span>.source = source<br>        <span class="hljs-variable language_">self</span>.__timeout = <span class="hljs-number">60</span><br><br>&gt; con = Connector(<span class="hljs-string">&#x27;mysql://localhost&#x27;</span>)<br>&gt; con.source<br><span class="hljs-string">&#x27;mysql://localhost&#x27;</span><br>&gt;con.__timeout<br>AttributeError: <span class="hljs-string">&#x27;Connector&#x27;</span> <span class="hljs-built_in">object</span> has no attribute <span class="hljs-string">&#x27;__timeout&#x27;</span><br></code></pre></td></tr></table></figure>
<p>위처럼 밑줄이 두 개인 경우는 메서드를 바로 인식하지 않는다. 하지만 이것은 파이썬이 다른 이름의 메서드를 만든 것이다. 이를 이름 맹글링이라고 한다. 이름 맹글링이란 파이썬이 본인의 규칙에 맞게 알아서 함수 또는 변수의 이름을 변형하는 것을 말한다. 밑줄 2개는 아래와 같은 이름의 메서드를 생성한다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">&gt;con._Connector__timeout<br><span class="hljs-number">60</span><br></code></pre></td></tr></table></figure>
<h3 id="프로퍼티">프로퍼티</h3>
<p>객체에 저장되는 값이 일반적인 속성을 가져야 할 경우에 프로퍼티를 보편적으로 사용된다. 예를 들어서 사용자가 올바르지 않은 양식의 이메일을 입력하지 않도록 만드는 코드를 짠다고 가정해보자. 그럼 코드는 다음과 같다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> re<br><br>email_format= re.<span class="hljs-built_in">compile</span>(<span class="hljs-string">r&quot;[^@]+@[^@]+[^@]+&quot;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">is_valid_email</span>(<span class="hljs-params">user_email: <span class="hljs-built_in">str</span></span>):<br>    <span class="hljs-keyword">return</span> re.<span class="hljs-keyword">match</span>(email_format,user_email) <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, username</span>):<br>        <span class="hljs-variable language_">self</span>.username = username<br>        <span class="hljs-variable language_">self</span>._email = <span class="hljs-literal">None</span><br><br><span class="hljs-meta">    @property</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">email</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>._email<br><br><span class="hljs-meta">    @email.setter</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">email</span>(<span class="hljs-params">self, new_email</span>):<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> is_valid_email(new_email):<br>            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;new_email&#125;</span>은 유효한 이메일이 아닙니다.&quot;</span>)<br>        <span class="hljs-variable language_">self</span>._email = new_email<br></code></pre></td></tr></table></figure>
<p>위 코드에서 <code>@property</code>는 클래스 User의 private 값인 <code>_email</code>을 반환한다. 두번째 메서드인 <code>@email.setter</code>는 프로퍼티에 값이 할당되면 해당 값이 올바른 이메일인지 검사한 후 클래스 User의 <code>_email</code> 속성을 업데이트 할지 결정한다.</p>
<p>프로퍼티는 명령-쿼리 분리 원칙을 따르기 위한 좋은 방법이다. 명령-쿼리 분리 원칙이란 객체의 메서드가 무언가의 상태를 변경하는 명령이거나 무언가의 값을 반환하는 쿼리이거나 둘 중 하나만 수행해야 한다는 것이다,</p>
<p>프로퍼티를 사용하면 <code>@property</code>는 무언가의 응답을 하기 위한 쿼리이고, <code>@&lt;property_name&gt;.setter</code>는 무언가를 하기 위한 커맨드(명령)이다.</p>
<h2 id="이터러블-객체">이터러블 객체</h2>
<p>파이썬에서는 기본적으로 반복 가능한 객체가 있다. for 루프를 사용하여 객체를 반복할 수도 있지만, 반복을 위한 자체 이터러블을 만들 수도 있다. 엄밀히 말하면 이터러블은 <code>__iter__</code> 매직 메서드를 구현한 객체, 이터레이터는 <code>__next__</code> 매직 메서드를 구현한 객체를 말한다.</p>
<p>파이썬의 반복은 이터러블 프로토콜이라는 자체 프로토콜을 사용해 동작한다. 객체를 반복할 수 있는지 확인하기 위해서 다음 2가지를 검사한다.</p>
<ul>
<li>객체가 <code>__next__</code>나 <code>__iter__</code> 중 하나를 포함하는가</li>
<li>객체가 시퀀스이고 <code>__len__</code>과 <code>__getitem__</code>를 모두 가져는가</li>
</ul>
<p>객체를 반복하려고 하면 파이썬은 해당 객체의 <code>iter()</code>를 호출한다. 이것은 해당 객체에 <code>__iter__</code> 메서드가 있는지 확인하는 것이다. <code>__iter__</code>가 있다면 해당 메서드를 실행한다. 예시를 보자.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> timedelta, date<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DataRangeContainerIterable</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self,start_date,end_date</span>):<br>        <span class="hljs-variable language_">self</span>.start_date = start_date<br>        <span class="hljs-variable language_">self</span>.end_date = end_date<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__iter__</span>(<span class="hljs-params">self</span>):<br>        current_day = <span class="hljs-variable language_">self</span>.start_date<br>        <span class="hljs-keyword">while</span> current_day &lt; <span class="hljs-variable language_">self</span>.end_date:<br>            <span class="hljs-keyword">yield</span> current_day<br>            current_day += timedelta(days=<span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure>
<p>위 코드는 <code>__iter__</code>에서 제너레이터를 생성하고 제너레이터는 다시 그 안의 <code>__iter__</code>를 생성한다. 이런 형태의 객체를 '컨테이너 이터러블'이라고 한다. 예시를 통해 위 코드를 확인해보자.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">&gt;temp = DataRangeContainerIterable(date(<span class="hljs-number">2020</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>),date(<span class="hljs-number">2020</span>,<span class="hljs-number">1</span>,<span class="hljs-number">5</span>))<br>&gt;<span class="hljs-string">&quot;,&quot;</span>.join(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">str</span>,temp))<br><span class="hljs-string">&#x27;2020-01-01,2020-01-02,2020-01-03,2020-01-04&#x27;</span><br></code></pre></td></tr></table></figure>
<p>한번에 날짜들이 나오는 것을 볼 수 있다.</p>
<p>그렇다면 만약 객체에 <code>__iter__</code>가 없는 경우에는 어떻게 반복해야 할까? 객체는 <code>__iter__</code>가 없는 경우에 <code>__getitem__</code>을 찾으며, 이것도 없다면 <code>TypeError</code>를 일으킨다.</p>
<p>따라서 시퀀스는 기본적으로 <code>__len__</code>과 <code>__getitem__</code>를 수현하고 첫 번째 인덱스 0부터 시작하여 포함된 요소를 한 번에 하나씩 차례로 가져올 수 있어야 한다. 그렇지 않으면 반복이 작동하지 않는다.</p>
<p>이터러블 방식은 데이터를 하나씩 가져오기 때문에 메모리를 적게 사용하지만 시간복잡도는 O(n)이다. 이와 반대로 시퀀스의 경우 메모리가 많이 사용되지만 시간 복잡도는 O(1)로 상수에 가능하다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DateRangeSequence</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, start_date, end_date</span>):<br>        <span class="hljs-variable language_">self</span>.start_date = start_date<br>        <span class="hljs-variable language_">self</span>.end_date = end_date<br>        <span class="hljs-variable language_">self</span>._<span class="hljs-built_in">range</span> = <span class="hljs-variable language_">self</span>._create_range()<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">_create_range</span>(<span class="hljs-params">self</span>):<br>        days = []<br>        current_day = <span class="hljs-variable language_">self</span>.start_date<br>        <span class="hljs-keyword">while</span> current_day &lt; <span class="hljs-variable language_">self</span>.end_date:<br>            days.append(current_day)<br>            current_day += timedelta(days=<span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> days<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__getitem__</span>(<span class="hljs-params">self, day_no</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>._<span class="hljs-built_in">range</span>[day_no]<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__len__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(<span class="hljs-variable language_">self</span>._<span class="hljs-built_in">range</span>)<br></code></pre></td></tr></table></figure>
<p>위의 코드는 <code>_create_range()</code>을 사용하여 시퀀스를 차례대로 불러온다. 해당 코드가 어떻게 동작하는지 확인해보자.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">&gt; temp = DateRangeSequence(date(<span class="hljs-number">2020</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>),date(<span class="hljs-number">2020</span>,<span class="hljs-number">1</span>,<span class="hljs-number">5</span>))<br>&gt; <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> temp:<br>    <span class="hljs-built_in">print</span>(i)<br><span class="hljs-number">2020</span>-01-01<br><span class="hljs-number">2020</span>-01-02<br><span class="hljs-number">2020</span>-01-03<br><span class="hljs-number">2020</span>-01-04<br>&gt; temp[-<span class="hljs-number">1</span>]<br>datetime.date(<span class="hljs-number">2020</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>)<br></code></pre></td></tr></table></figure>
<p>보시다시피 음수 인덱스도 작동하는 것을 확인할 수 있다. 이는 DateRangeSequence 객체가 모든 작업을 래핑된 객체인 <code>days</code>에 위임했기 때문이다.</p>
<h2 id="컨테이너-객체">컨테이너 객체</h2>
<p>컨테이너는 <code>__contains__</code> 메서드를 구현한 객체로 <code>__contains__</code> 메서드는 일반적으로 불리언 값을 반환한다. 해당 메서드는 파이썬에서 <code>in</code>키워드가 발견될 때 호출된다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">element <span class="hljs-keyword">in</span> container <span class="hljs-comment"># container.__contains__(element)</span><br></code></pre></td></tr></table></figure>
<p>이 메서드를 잘 사용하면 코드의 가독성이 정말 높아진다. 아래의 예시는 2차원 게임 지도에서 특정 위치에 표시를 해야 하는 경우를 구현한 코드이다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 난해한 코드</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">mark_coordinate</span>(<span class="hljs-params">grid, coord</span>):<br>    <span class="hljs-keyword">if</span> <span class="hljs-number">0</span> &lt;= coord.x &lt; grid.width <span class="hljs-keyword">and</span> <span class="hljs-number">0</span> &lt;= coord.y &lt; grid.height:<br>        grid[coord] = MARKED<br><br><span class="hljs-comment"># 정리된 코드</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Boundaries</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, width, height</span>):<br>        <span class="hljs-variable language_">self</span>.width = width<br>        <span class="hljs-variable language_">self</span>.height = height<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__contains__</span>(<span class="hljs-params">self, coord</span>):<br>        x,y = coord<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span> &lt;= x &lt; <span class="hljs-variable language_">self</span>.width <span class="hljs-keyword">and</span> <span class="hljs-number">0</span> &lt;= y &lt; <span class="hljs-variable language_">self</span>.height<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Grid</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, width, height</span>):<br>        <span class="hljs-variable language_">self</span>.width = width<br>        <span class="hljs-variable language_">self</span>.height = height<br>        <span class="hljs-variable language_">self</span>.limits = Boundaries(width, height)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__contains__</span>(<span class="hljs-params">self, coord</span>):<br>        <span class="hljs-keyword">return</span> coord <span class="hljs-keyword">in</span> <span class="hljs-variable language_">self</span>.limits<br></code></pre></td></tr></table></figure>
<p>위의 난해한 코드는 복잡하고 이해하기도 직관적이지 않다. 아래의 코드처럼 클래스로 정리한다면 훨씬 가독성이 좋고 깔끔하다.</p>
<h2 id="객체의-동적인-속성">객체의 동적인 속성</h2>
<p><code>__getattr__</code> 매직 메서드를 사용하여 객체에서 속성을 얻는 방법을 제어할 수 있다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicAttributes</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, attribute</span>):<br>        <span class="hljs-variable language_">self</span>.attribute = attribute<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__getattr__</span>(<span class="hljs-params">self, attr</span>):<br>        <span class="hljs-keyword">if</span> attr.startswith(<span class="hljs-string">&quot;fallback_&quot;</span>):<br>            name = attr.replace(<span class="hljs-string">&quot;fallback_&quot;</span>,<span class="hljs-string">&quot;&quot;</span>)<br>            <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;[fallback resolved] <span class="hljs-subst">&#123;name&#125;</span>&quot;</span><br>        <span class="hljs-keyword">raise</span> AttributeError(<span class="hljs-string">f&quot;<span class="hljs-subst">&#123;self.__class__.__name__&#125;</span>에는 <span class="hljs-subst">&#123;attr&#125;</span> 속성이 없음&quot;</span>)<br></code></pre></td></tr></table></figure>
<p>위의 예시를 이용하여 <code>__getattr__</code>의 작동원리를 확인해보자.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">&gt; temp = DynamicAttributes(<span class="hljs-string">&#x27;value&#x27;</span>)<br>&gt; temp.fallback_test <span class="hljs-comment"># __getattr__ 적용</span><br><span class="hljs-string">&#x27;[fallback resolved] test&#x27;</span><br></code></pre></td></tr></table></figure>
<p>첫 번째 예시는 <code>fallback_test</code>라고 attribute 메서드로 보냄으로써 <code>f"[fallback resolved] &#123;name&#125;"</code> 해당 코드값이 반환된다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">&gt;temp.__dict__[<span class="hljs-string">&#x27;fallback_new&#x27;</span>] = <span class="hljs-string">&#x27;new_value&#x27;</span><br>&gt;temp.__dict__<br>&#123;<span class="hljs-string">&#x27;attribute&#x27;</span>: <span class="hljs-string">&#x27;value&#x27;</span>, <span class="hljs-string">&#x27;fallback_new&#x27;</span>: <span class="hljs-string">&#x27;new_value&#x27;</span>&#125;<br>&gt;<span class="hljs-built_in">getattr</span>(temp, <span class="hljs-string">&quot;fallback_new&quot;</span>)<br><span class="hljs-string">&#x27;new_value&#x27;</span><br></code></pre></td></tr></table></figure>
<p>두 번째 예시는 인스턴스 <code>temp</code>에 새로운 속성을 삽입한 후 <code>getattr()</code>을 통해 불러오면 속성값이 나오는 것을 확인할 수 있다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">&gt;<span class="hljs-built_in">getattr</span>(temp, <span class="hljs-string">&quot;someting&quot;</span>)<br>AttributeError: DynamicAttributes에는 someting 속성이 없음<br>&gt; <span class="hljs-built_in">getattr</span>(temp, <span class="hljs-string">&quot;someting&quot;</span>,<span class="hljs-string">&quot;yaah&quot;</span>)<br><span class="hljs-string">&#x27;yaah&#x27;</span><br></code></pre></td></tr></table></figure>
<p>마지막 예시는 값을 검색할 수 없는 경우에는 <code>AttributeError</code>가 일어나는 것을 확인할 수 있다. 신기한 것은 뒤에 하나를 추가하면 마지막 값을 리턴하는 것이다. 이것은 기존에 파라미터 2개로 설정된 <code>getattr()</code>가 작동하는 것 같다.</p>
<h2 id="호출형-객체">호출형 객체</h2>
<p>함수처럼 작동하는 객체는 매우 편리하다. 매직 메서드인 <code>__call__</code>을 사용하면 일반 객체를 함수처럼 호출할 수 있다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> defaultdict<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CallCount</span>:<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-variable language_">self</span>._counts = defaultdict(<span class="hljs-built_in">int</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__call__</span>(<span class="hljs-params">self, argument</span>):<br>        <span class="hljs-variable language_">self</span>._counts[argument]+=<span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>._counts[argument]<br></code></pre></td></tr></table></figure>
<p>위 코드는 해당 객체를 반복할수록 <code>__call__</code>를 호출하여 객체 값을 변경한다.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python">&gt; cc = CallCount()<br>&gt; cc(<span class="hljs-number">1</span>)<br><span class="hljs-number">1</span><br>&gt; cc(<span class="hljs-number">1</span>)<br><span class="hljs-number">2</span><br>&gt; cc(<span class="hljs-number">1</span>)<br><span class="hljs-number">3</span><br>&gt; cc(<span class="hljs-number">2</span>)<br><span class="hljs-number">1</span><br>&gt; cc.__dict__<br>&#123;<span class="hljs-string">&#x27;_counts&#x27;</span>: defaultdict(<span class="hljs-built_in">int</span>, &#123;<span class="hljs-number">1</span>: <span class="hljs-number">3</span>, <span class="hljs-number">2</span>: <span class="hljs-number">1</span>&#125;)&#125;<br></code></pre></td></tr></table></figure>
<p><code>__dict__</code>를 사용하여 객체들을 확인해보면 지금까지 변경된 부분이 저장되어 있는 것을 알 수 있다.</p>
<h2 id="파이썬에서-유의할-점">파이썬에서 유의할 점</h2>
<p>언어의 주요 기능을 이해하는 것 외에도 흔히 발생하는 잠재적인 문제를 피할 수 있는 관용적인 코드를 작성하는 것도 중요하다. 이번 섹션에서 논의되는 대부분은 완전히 해결할 수 있는 문제들이다. 따라서 지금부터 설명하는 방식대로 리팩토링하는 것이 좋다.</p>
<h3 id="변경가능한-파라미터-값">변경가능한 파라미터 값</h3>
<p>쉽게 말해 변경 가능한 객체를 함수의 기본 인자로 사용하면 안된다.</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/language/" class="category-chain-item">Language</a>
  
  
    <span>></span>
    
  <a href="/categories/language/python/" class="category-chain-item">python</a>
  
  

  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/python/" class="print-no-link">#python</a>
      
        <a href="/tags/review/" class="print-no-link">#review</a>
      
        <a href="/tags/cleancode/" class="print-no-link">#Cleancode</a>
      
        <a href="/tags/%ED%81%B4%EB%A6%B0%EC%BD%94%EB%93%9C/" class="print-no-link">#클린코드</a>
      
        <a href="/tags/%EC%B1%85%EB%A6%AC%EB%B7%B0/" class="print-no-link">#책리뷰</a>
      
        <a href="/tags/code/" class="print-no-link">#code</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>파이썬스러운 코드</div>
      <div>https://dev-bearabbit.github.io/ko/Python/python-1/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>Jess</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>2021년 12월 10일</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>Licensed under</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/ko/Hadoop/hadoop-8/" title="YARN 아키텍쳐">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">YARN 아키텍쳐</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/ko/Python/python-0/" title="소개, 코드 포매팅과 도구">
                        <span class="hidden-mobile">소개, 코드 포매팅과 도구</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>Table of Contents</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  


  
  









    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://dev-bearabbit.github.io" target="_blank" rel="nofollow noopener"><span>Jess</span></a>
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  
      <script>
        if (!window.MathJax) {
          window.MathJax = {
            tex    : {
              inlineMath: { '[+]': [['$', '$']] }
            },
            loader : {
              load: ['ui/lazy']
            },
            options: {
              renderActions: {
                insertedScript: [200, () => {
                  document.querySelectorAll('mjx-container').forEach(node => {
                    let target = node.parentNode;
                    if (target.nodeName.toLowerCase() === 'li') {
                      target.parentNode.classList.add('has-jax');
                    }
                  });
                }, '', false]
              }
            }
          };
        } else {
          MathJax.startup.document.state(0);
          MathJax.texReset();
          MathJax.typeset();
          MathJax.typesetPromise();
        }

        Fluid.events.registerRefreshCallback(function() {
          if ('MathJax' in window && MathJax.startup.document && typeof MathJax.startup.document.state === 'function') {
            MathJax.startup.document.state(0);
            MathJax.texReset();
            MathJax.typeset();
            MathJax.typesetPromise();
          }
        });
      </script>
    

  <script  src="https://lib.baomitu.com/mathjax/3.2.2/es5/tex-mml-chtml.js" ></script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>
